(()=>{"use strict";let e="";function t(e){localStorage.setItem("userData",JSON.stringify(e))}function n(){let e;try{e=JSON.parse(localStorage.getItem("userData")),e||(e=new Object,t(e))}catch(e){console.error(e)}return e}function a(){let t=n()[e]||[],a="";t.forEach(((e,t)=>{a+=`<div class = "itemContainer"> \n                        <div class = "itemName">\n                        <h2>\n                       <span class = "hiddenSpan"><input type = "text"  onchange = "editItem(event)" data-index = "${t}" class = "hiddeninput ${t}" value = ${e} ></span>\n                        </h2>\n                        </div>\n                        <div>\n                            <button type="submit" onclick = "deleteItem(event)" data-index = "${t}" class="btn btn-primary ${t}">Delete Item</button>\n                        </div>                    \n                     </div>`})),document.querySelector(".displayItems").innerHTML=a}function i(i){let o=i.target.dataset.index,r=n();r[e].splice(o,1),t(r),a(),l()}function l(){let t=n()[e].length;document.querySelector(".remainingItems").innerHTML=5-t+" Items can be Added  "}function o(){let e=n(username),a=Object.keys(e);a.length>3&&delete e[a[0]],t(e)}window.addItem=function(i){i.preventDefault();let o=n();o[e].length<5?(o[e].push(i.target[0].value),t(o),a(),l(),document.getElementById("addItemForm").reset()):alert("Only five items can be added")},window.deleteItem=i,window.editItem=function(l){let o=l.target.dataset.index,r=n();l.target.value.trim().length>0?(r[e][o]=l.target.value,t(r),a()):i(l)},window.handleLoginSubmit=function(i){i.preventDefault();let r=i.target[0].value;n(),e=r,function(e){try{let n=JSON.parse(localStorage.getItem("userData"));n[e]||(n[e]=[],t(n))}catch(n){console.log(n),userData[e]=[],t(userData)}}(r),l(),o(),a(),document.querySelector(".loginForm").style.display="none",document.querySelector(".groceryList").style.display="inline"},window.logout=function(){e="",document.querySelector(".loginForm").style.display="inline",document.querySelector(".groceryList").style.display="none"},window.removeUsers=o})();